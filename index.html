<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Realm ‚Äî Minecraft Mini App</title>
<style>
:root {
  --bg: #161616;
  --surface: #161616;
  --text: #F2F2F2;
  --subtitle: #9a9a9a;
  --stroke: rgba(255,255,255,0.08);
  --radius: 14px;
}

body {
  margin: 0;
  min-height: 100dvh;
  max-height: 100dvh;
  overflow: hidden;
  background: var(--bg) !important;
  color: var(--text);
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, Arial, sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: calc(10px + env(safe-area-inset-top)) calc(12px + env(safe-area-inset-right)) calc(10px + env(safe-area-inset-bottom)) calc(12px + env(safe-area-inset-left));
}

body.no-scroll {
  overflow: hidden;
  touch-action: none;
}

h2 {
  margin: 0 0 10px 0;
  font-size: clamp(17px, 3.6vw, 18px);
  font-weight: 500;
}

p {
  font-size: clamp(13px, 3.2vw, 14px);
  line-height: 1.5;
  color: var(--subtitle);
  margin: 6px 0;
}

.btn {
  width: 100%;
  max-width: 260px;
  display: block;
  text-align: center;
  padding: 12px;
  border-radius: 10px;
  background: var(--surface);
  border: 1px solid var(--stroke);
  color: var(--text);
  text-decoration: none;
  font-weight: 500;
  font-size: clamp(14px, 3.4vw, 15.5px);
  margin: 10px auto 0 auto;
  transition: 0.15s ease;
}

.btn:hover {
  border-color: var(--text);
}

.profile {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 12px;
}

.welcome {
  margin-top: 0;
  font-size: clamp(24px, 5vw, 28px);
  font-weight: 700;
  text-align: center;
  margin-bottom: 4px;
}

.server-info {
  margin-top: 0;
  font-size: clamp(13px, 3.2vw, 14px);
  line-height: 1.45;
  color: var(--subtitle);
  text-align: center;
  margin-bottom: 26px;
  max-width: 420px;
}

.logo-img {
  width: min(300px, 88vw);
  height: 180px;
  object-fit: contain;
  border-radius: 10px;
  margin: 0 auto 6px auto;
  display: block;
  transform: translateX(10px);
  transition: transform .25s ease;
  will-change: transform;
}

.logo-img:hover {
  transform: translateX(10px) scale(1.03);
}

.text-link {
  color: var(--text);
  text-decoration: none;
  border-bottom: 2px solid rgba(255,255,255,0.95);
  padding-bottom: 0;
  font-weight: 600;
  display: inline-block;
  transform-origin: center bottom;
  cursor: pointer;
  transition: color .2s ease, border-color .2s ease, opacity .2s ease;
}

.text-link:hover {
  color: var(--text);
  border-color: rgba(255,255,255,0.7);
  opacity: 0.92;
}

.text-link.small {
  font-size: clamp(13px, 3.2vw, 13.5px);
}

.muted {
  color: var(--subtitle);
}

.inline-gap {
  margin-left: 4px;
}

.divider {
  width: 100%;
  height: 1px;
  background: var(--stroke);
  margin: 10px 0;
}

.meta {
  text-align: center;
  opacity: 0.6;
  font-size: clamp(12px, 3vw, 13px);
}

.icon-row {
  display: flex;
  justify-content: center;
  gap: 14px;
}

.icon-button {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: #2A2A2A;
  display: flex;
  align-items: center;
  justify-content: center;
  text-decoration: none;
}

.icon-button:hover {
  background: #3A3A3A;
}

.payment-row {
  display: flex;
  justify-content: center;
  gap: 14px;
  padding: 26px 0;
}

.payment-button {
  width: 48px;
  height: 48px;
  border-radius: 14px;
  background: #4E00CE;
  display: flex;
  align-items: center;
  justify-content: center;
  text-decoration: none;
}

.payment-button img {
  width: 48px;
  height: 48px;
  border-radius: 12px;
}

.payment-button:hover {
  opacity: 0.92;
}

/* Modal styling */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100dvh;
  backdrop-filter: blur(6.4px);
  -webkit-backdrop-filter: blur(6.4px);
  background: rgba(0,0,0,0.35);
  display: flex;
  align-items: flex-end;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity .35s ease, backdrop-filter .35s ease, background .35s ease;
  z-index: 10;
}

.modal.hidden {
  opacity: 0;
  pointer-events: none;
}

.modal.active {
  opacity: 1;
  pointer-events: auto;
}

.modal-box {
  background: #161616;
  border: none;
  border-radius: 22px 22px 0 0;
  width: 100%;
  max-width: 360px;
  padding: 14px 18px calc(20px + env(safe-area-inset-bottom)) 18px;
  text-align: center;
  box-shadow: 0 -4px 24px rgba(0,0,0,0.35);
  transform: translateY(100%);
}

.modal.active .modal-box {
  animation: slideUp .35s ease forwards;
}

.modal.closing .modal-box {
  animation: slideDown .35s ease forwards;
}

.modal-title {
  font-size: clamp(18px, 4.8vw, 21px);
  font-weight: 800;
  margin: 6px 0 10px 0;
  display: block;
}

.modal-text {
  font-size: clamp(14px, 3.8vw, 15px);
  font-weight: 500;
  color: var(--text);
  margin: 0 0 14px 0;
  text-align: left;
  line-height: 1.6;
}
.modal-text strong {
  color: var(--text);
}
.modal-text.info-text {
  color: var(--subtitle);
}
.modal-text a {
  color: var(--text);
  text-decoration: none;
  border-bottom: 2px solid rgba(255,255,255,0.95);
  padding-bottom: 0;
  font-weight: 600;
}
.modal-text .muted {
  color: var(--subtitle);
}

.modal-header {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  padding-left: 4px;
  margin-bottom: 10px;
}

.modal-close {
  position: absolute;
  right: 0;
  top: 0;
  background: #2A2A2A;
  border-radius: 50%;
  width: 38px;
  height: 38px;
  display: flex;
  justify-content: center;
  align-items: center;
  border: none;
  color: #fff;
  cursor: pointer;
  transition: background .2s ease;
}

.modal-close:hover {
  background: #3A3A3A;
}

.modal-inner {
  background: #212121;
  padding: 14px;
  border-radius: 14px;
}

#donateModal .modal-box {
  padding: 12px 14px calc(16px + env(safe-area-inset-bottom)) 14px;
  border-radius: 18px;
}

#donateModal .modal-inner {
  padding: 12px;
}

#donateModal .payment-row {
  padding: 12px 0 8px;
}

@keyframes slideUp {
  from { transform: translateY(100%); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes slideDown {
  from { transform: translateY(0); opacity: 1; }
  to { transform: translateY(100%); opacity: 0; }
}

@keyframes link-wiggle {
  0% { transform: translate(0, 0); }
  50% { transform: translate(0.9px, -1.6px); }
  100% { transform: translate(-0.9px, -0.6px); }
}
</style>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>

<body>

  <div class="profile">
    <img class="logo-img" src="3.png" alt="realm smp logo" />
    <h2 class="welcome">realm smp</h2>
    <p class="server-info">—Å–µ—Ä–≤–µ—Ä –≤–¥–æ—Ö–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø—Ä–∏–∫–æ–ª–∞–º–∏ FreakLenda –∏ –ú–∞—Ñ–∞–Ω—å–∫–∏<br>–±–µ–∑ –ø—Ä–∏–≤–∞—Ç–æ–≤ –∏ –ø—Ä–æ—á–µ–π —Ö—É–π–Ω–∏ =)</p>
  </div>

  <a class="btn" href="#" role="button" data-modal-target="playModal">–∫–∞–∫ –ø–æ–∏–≥—Ä–∞—Ç—å???</a>
  <a class="btn" href="#" role="button" data-modal-target="infoModal">–ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–∞ –∏ –ø—Ä–∞–≤–∏–ª–∞</a>
  <a class="btn" href="#" role="button" data-modal-target="donateModal">–ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</a> <!-- Open modal --> <!-- –ÆMoney integration later -->

  <!-- Modal: play -->
  <div id="playModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="playModalTitle">
    <div class="modal-box">
      <div class="modal-header">
        <span class="modal-title" id="playModalTitle">–∫–∞–∫ –ø–æ–∏–≥—Ä–∞—Ç—å???</span>
        <button class="modal-close" type="button" data-close-modal>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 6L6 18M6 6L18 18" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>
      <div class="modal-inner">
        <p class="modal-text">
          <strong>1.</strong> –ø–æ–¥–∞–π –∑–∞—è–≤–∫—É –≤ <a href="https://t.me/RealmSMPSupport_bot" class="text-link small external-link" rel="noopener noreferrer">–±–æ—Ç–µ</a>
          <span class="muted inline-gap">–∑–∞—è–≤–∫–∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–æ–º –≤ —Ç–µ—á–µ–Ω–∏–µ 48 —á–∞—Å–æ–≤</span><br><br>
          <strong>2.</strong> —Å–∫–∞—á–∞–π <a href="https://t.me/realm_smp" class="text-link small external-link" rel="noopener noreferrer">—Å–±–æ—Ä–∫—É</a>
          <span class="muted inline-gap">—ç—Ç–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ –¥–ª—è –∏–≥—Ä—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ</span><br><br>
          <strong>3.</strong> –∑–∞–ª–µ—Ç–∞–π –∏–≥—Ä–∞—Ç—å üöÄ<br><br>
          –µ—Å–ª–∏ –∫–∞–∫–∏–µ-—Ç–æ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å–±–æ—Ä–∫–æ–π –∏–ª–∏ –∞–Ω–∫–µ—Ç–æ–π ‚Äî <a href="https://t.me/RealmSMPSupport_bot" class="text-link small external-link" rel="noopener noreferrer">–ø–∏—à–∏ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É</a>
        </p>
      </div>
    </div>
  </div>

  <!-- Modal: info -->
  <div id="infoModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="infoModalTitle">
    <div class="modal-box">
      <div class="modal-header">
        <span class="modal-title" id="infoModalTitle">–ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–∞ –∏ –ø—Ä–∞–≤–∏–ª–∞</span>
        <button class="modal-close" type="button" data-close-modal>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 6L6 18M6 6L18 18" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>
      <div class="modal-inner">
        <p class="modal-text info-text">
          <strong>–ò–Ω—Ñ–∞:</strong><br>
          paper 1.21.1, <a href="https://telegra.ph/polnyj-spisok-vseh-modov-12-02" class="text-link external-link" rel="noopener noreferrer">—Å–ø–∏—Å–æ–∫ –º–æ–¥–æ–≤</a>, –≤–∞–Ω–∏–ª–ª–∞ –±–µ–∑ –ø—Ä–∏–≤–∞—Ç–æ–≤<br><br>
          <strong>–ú–æ—Ç–∏–≤:</strong><br>
          —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –º–æ–∂–Ω–æ –ª–∞–º–ø–æ–≤–æ –ø–æ–∏–≥—Ä–∞—Ç—å, –Ω–∞–π—Ç–∏ –¥—Ä—É–∑–µ–π –∏ –∑–∞–≤–µ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞<br><br>
          <strong>–ù–µ–ª—å–∑—è:</strong><br>
          –ª—é–±—ã–µ —á–∏—Ç—ã, –∑–∞–ø—Ä–µ—Ç–∫–∏ —Ç–≤–∏—á–∞ –∏ —é—Ç—É–±–∞, —Ä–µ–∫–ª–∞–º–∞, –≥—Ä–∏—Ñ –±–µ–∑ —Ä–∞–∑–±–∏—Ä–∞—Ç–µ–ª—å—Å—Ç–≤ (—Ç–æ–ª—å–∫–æ —Ä–∞–¥–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞)<br><br>
          
<strong><a href="https://telegra.ph/Vsya-infa-i-pravila-12-02" class="text-link external-link" rel="noopener noreferrer">–≤—Å—è –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –±–µ–∑ –æ–±—Ä–µ–∑–æ–∫</a></strong>
        </p>
        <div class="divider"></div>
        <div class="meta">
          <div class="icon-row">
            <!-- Telegram Icon --><a href="https://t.me/realm_smp" class="icon-button external-link" rel="noopener noreferrer">
              <svg width='16' height='16' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M21.5 3.5L2.5 10.5C1.5 10.9 1.6 12.2 2.6 12.5L9 14.5L11 21C11.3 22 12.6 22 13 21.1L15.5 15.5L20 19C20.9 19.7 22.2 19.2 22.5 18.1L24 4.5C24.3 3.3 22.9 2.4 21.5 3.5Z' fill='white'/></svg>
            </a>
            <!-- Discord Icon -->
            <a href="https://discord.gg/W2ePNufkDf" class="icon-button external-link" rel="noopener noreferrer">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                <path d="M20.317 4.3698C18.99 3.7638 17.575 3.3328 16.102 3.0928C15.9005 3.45822 15.709 3.84008 15.53 4.2368C13.997 4.0128 12.463 4.0128 10.931 4.2368C10.752 3.84008 10.56 3.45822 10.359 3.0928C8.88597 3.3338 7.47097 3.7648 6.14397 4.3708C2.88497 9.0418 2.04997 13.5918 2.38097 18.0878C4.08197 19.3408 5.90997 20.2398 7.83297 20.8178C8.33097 20.0708 8.76897 19.2778 9.13797 18.4508C8.33097 18.2488 7.55897 17.9658 6.82597 17.6048C7.01045 17.4792 7.18944 17.3454 7.36197 17.2038C11.258 19.0038 15.585 19.0038 19.481 17.2038C19.654 17.3454 19.832 17.4792 20.015 17.6048C19.282 17.9668 18.51 18.2498 17.703 18.4518C18.074 19.2788 18.511 20.0708 19.009 20.8168C20.936 20.2388 22.764 19.3398 24.464 18.0868C24.84 13.4968 23.711 8.9698 20.317 4.3698ZM8.80297 14.6628C7.74197 14.6628 6.88297 13.6828 6.88297 12.4578C6.88297 11.2328 7.72197 10.2528 8.80297 10.2528C9.88397 10.2528 10.742 11.2328 10.722 12.4578C10.722 13.6828 9.88397 14.6628 8.80297 14.6628ZM15.197 14.6628C14.136 14.6628 13.277 13.6828 13.277 12.4578C13.277 11.2328 14.115 10.2528 15.197 10.2528C16.278 10.2528 17.137 11.2328 17.117 12.4578C17.117 13.6828 16.278 14.6628 15.197 14.6628Z"/>
              </svg>
            </a>
            <!-- Owner TG Icon (crown) --><a href="https://t.me/sdk_net" class="icon-button external-link" rel="noopener noreferrer">
              <svg width='18' height='18' viewBox='0 0 24 24' fill='white' xmlns='http://www.w3.org/2000/svg'><path d='M5 20L4 10L8 13L12 7L16 13L20 10L19 20H5ZM12 4L9.5 9L12 7L14.5 9L12 4Z'/></svg>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: donate -->
  <div id="donateModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="donateModalTitle">
    <div class="modal-box">
      <div class="modal-header">
        <span class="modal-title" id="donateModalTitle">–≤—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –ø–µ—Ä–µ–≤–æ–¥–∞</span>
        <button class="modal-close" type="button" data-close-modal>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 6L6 18M6 6L18 18" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>
      <div class="modal-inner">
        <div class="payment-row">
          <a href="https://yoomoney.ru/to/4100119373222814" class="payment-button external-link" rel="noopener noreferrer">
            <img src="4.png" alt="YuMoney" width="28" height="28" />
          </a>
        </div>
      </div>
    </div>
  </div>

<script>
  const root = document.documentElement;
  const tg = window.Telegram?.WebApp;
  const hasTelegram = Boolean(tg);
  let activeModal = null;

  const modals = Array.from(document.querySelectorAll('.modal'));
  const openModalButtons = document.querySelectorAll('[data-modal-target]');
  const closeModalButtons = document.querySelectorAll('[data-close-modal]');
  const externalLinks = document.querySelectorAll('.external-link');

  function hexToRgba(hex, alpha) {
    if (!hex || typeof hex !== 'string') return null;
    const normalized = hex.replace('#', '');
    if (![3, 6].includes(normalized.length)) return null;
    const chunk = normalized.length === 3 ? normalized.split('').map(c => c + c).join('') : normalized;
    const intVal = parseInt(chunk, 16);
    const r = (intVal >> 16) & 255;
    const g = (intVal >> 8) & 255;
    const b = intVal & 255;
    return `rgba(${r}, ${g}, ${b}, ${alpha})`;
  }

  function applyTheme(themeParams = {}) {
    const setVar = (name, value) => {
      if (value) root.style.setProperty(name, value);
    };

    setVar('--bg', themeParams.bg_color);
    setVar('--surface', themeParams.secondary_bg_color || themeParams.bg_color);
    setVar('--text', themeParams.text_color);
    setVar('--subtitle', hexToRgba(themeParams.hint_color, 0.7));
    setVar('--stroke', hexToRgba(themeParams.section_separator_color, 0.16));
  }

  function lockScroll() {
    document.body.classList.add('no-scroll');
  }

  function unlockScroll() {
    document.body.classList.remove('no-scroll');
  }

  function openModal(id) {
    const modal = document.getElementById(id);
    if (!modal) return;

    if (activeModal && activeModal !== modal) {
      closeModal(activeModal);
    }

    modal.classList.remove('hidden', 'closing');
    modal.classList.add('active');
    activeModal = modal;
    lockScroll();
  }

  function closeModal(modal) {
    if (!modal) return;

    const box = modal.querySelector('.modal-box');
    modal.classList.add('closing');
    modal.classList.remove('active');

    const handleClose = () => {
      if (!modal.classList.contains('closing')) return;
      modal.classList.add('hidden');
      modal.classList.remove('closing');
      if (activeModal === modal) activeModal = null;
      const hasAnyOpen = modals.some(m => m.classList.contains('active'));
      if (!hasAnyOpen) unlockScroll();
      box?.removeEventListener('animationend', handleClose);
    };

    if (box) {
      box.addEventListener('animationend', handleClose, { once: true });
    } else {
      handleClose();
    }
  }

  function openExternal(url) {
    if (!url) return;
    if (hasTelegram && typeof tg.openLink === 'function') {
      tg.openLink(url, { try_instant_view: false });
    } else {
      window.open(url, '_blank', 'noopener,noreferrer');
    }
  }

  openModalButtons.forEach((btn) => {
    btn.addEventListener('click', (e) => {
      e.preventDefault();
      openModal(btn.dataset.modalTarget);
    });
  });

  closeModalButtons.forEach((btn) => {
    btn.addEventListener('click', () => {
      const modal = btn.closest('.modal');
      closeModal(modal);
    });
  });

  modals.forEach((modal) => {
    modal.addEventListener('click', (e) => {
      if (e.target === modal) closeModal(modal);
    });
  });

  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && activeModal) {
      closeModal(activeModal);
    }
  });

  externalLinks.forEach((link) => {
    link.setAttribute('rel', 'noopener noreferrer');
    link.addEventListener('click', (e) => {
      e.preventDefault();
      openExternal(link.href);
    });
  });

  if (hasTelegram) {
    tg.ready();
    tg.expand?.();
  } else {
    console.warn('Telegram WebApp API not available; running in normal browser preview.');
  }
</script>

</body>
</html>
